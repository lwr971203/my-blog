<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Qt框架功能概述 | 个人博客</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="lwr的个人博客">
    
    <link rel="preload" href="/my-blog/assets/css/0.styles.8e9e9e1d.css" as="style"><link rel="preload" href="/my-blog/assets/js/app.8e128a0c.js" as="script"><link rel="preload" href="/my-blog/assets/js/7.9bc745bc.js" as="script"><link rel="preload" href="/my-blog/assets/js/2.1c59524a.js" as="script"><link rel="preload" href="/my-blog/assets/js/1.4270a9d7.js" as="script"><link rel="preload" href="/my-blog/assets/js/43.50b20d44.js" as="script"><link rel="prefetch" href="/my-blog/assets/js/10.db0e7049.js"><link rel="prefetch" href="/my-blog/assets/js/11.be2e0167.js"><link rel="prefetch" href="/my-blog/assets/js/14.039cc613.js"><link rel="prefetch" href="/my-blog/assets/js/15.a38565a3.js"><link rel="prefetch" href="/my-blog/assets/js/16.c20929a1.js"><link rel="prefetch" href="/my-blog/assets/js/17.b3160632.js"><link rel="prefetch" href="/my-blog/assets/js/18.223442dc.js"><link rel="prefetch" href="/my-blog/assets/js/19.2effed27.js"><link rel="prefetch" href="/my-blog/assets/js/20.742bfb3e.js"><link rel="prefetch" href="/my-blog/assets/js/21.ba8bdb48.js"><link rel="prefetch" href="/my-blog/assets/js/22.2a260054.js"><link rel="prefetch" href="/my-blog/assets/js/23.a54cbeb5.js"><link rel="prefetch" href="/my-blog/assets/js/24.b59dbd98.js"><link rel="prefetch" href="/my-blog/assets/js/25.21b3ea40.js"><link rel="prefetch" href="/my-blog/assets/js/26.19cd6834.js"><link rel="prefetch" href="/my-blog/assets/js/27.2064fffd.js"><link rel="prefetch" href="/my-blog/assets/js/28.82406389.js"><link rel="prefetch" href="/my-blog/assets/js/29.f3831ded.js"><link rel="prefetch" href="/my-blog/assets/js/3.5cd4e6c1.js"><link rel="prefetch" href="/my-blog/assets/js/30.6a9cb3e4.js"><link rel="prefetch" href="/my-blog/assets/js/31.39857869.js"><link rel="prefetch" href="/my-blog/assets/js/32.9f9b9041.js"><link rel="prefetch" href="/my-blog/assets/js/33.6c30c999.js"><link rel="prefetch" href="/my-blog/assets/js/34.fa4aff25.js"><link rel="prefetch" href="/my-blog/assets/js/35.54780a93.js"><link rel="prefetch" href="/my-blog/assets/js/36.b81c8de2.js"><link rel="prefetch" href="/my-blog/assets/js/37.a1297d86.js"><link rel="prefetch" href="/my-blog/assets/js/38.2497ee2d.js"><link rel="prefetch" href="/my-blog/assets/js/39.73ed935c.js"><link rel="prefetch" href="/my-blog/assets/js/4.4369a37a.js"><link rel="prefetch" href="/my-blog/assets/js/40.3b4e4ea3.js"><link rel="prefetch" href="/my-blog/assets/js/41.0fa78e59.js"><link rel="prefetch" href="/my-blog/assets/js/42.d058a277.js"><link rel="prefetch" href="/my-blog/assets/js/5.199097ef.js"><link rel="prefetch" href="/my-blog/assets/js/6.122eb8c3.js"><link rel="prefetch" href="/my-blog/assets/js/8.b2e33b3e.js"><link rel="prefetch" href="/my-blog/assets/js/9.e819fb8a.js"><link rel="prefetch" href="/my-blog/assets/js/vendors~docsearch.e143dbd5.js">
    <link rel="stylesheet" href="/my-blog/assets/css/0.styles.8e9e9e1d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>个人博客</h3> <p class="description" data-v-59e6cb88>lwr的个人博客</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2024
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/my-blog/" class="home-link router-link-active"><!----> <span class="site-name">个人博客</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/my-blog/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      lwr的个人博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/lwr971203" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.yuque.com/lwr971203" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  语雀
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><!----> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>6</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>0</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/my-blog/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      lwr的个人博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/lwr971203" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.yuque.com/lwr971203" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  语雀
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/my-blog/" class="sidebar-heading clickable router-link-active"><span>欢迎光临</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/my-blog/cpp/列表初始化" class="sidebar-heading clickable"><span>c++</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/my-blog/qt/README.md" class="sidebar-heading clickable open"><span>qt基础知识</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/qt/基础知识/03-Qt框架功能.html" class="active sidebar-link">03-Qt框架功能</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88></h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2024
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">Qt框架功能概述</h1> <div data-v-8a445198><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="qt框架功能概述"><a href="#qt框架功能概述" class="header-anchor">#</a> Qt框架功能概述</h1> <h2 id="模块"><a href="#模块" class="header-anchor">#</a> 模块</h2> <p>Qt框架中的模块分为两大量</p> <ul><li><code>Qt Essentials</code>：Qt框架的基础模块，自动安装的</li> <li><code>Qt Addons</code>：Qt框架的附加模块</li></ul> <h3 id="基础模块"><a href="#基础模块" class="header-anchor">#</a> 基础模块</h3> <table><thead><tr><th>模块</th> <th>功能</th></tr></thead> <tbody><tr><td><code>Qt Core</code></td> <td>核心模块，定义了元对象系统对c++标准的拓展</td></tr> <tr><td><code>Qt GUI</code></td> <td>提供了GUI设计需要的基础类</td></tr> <tr><td><code>Qt Widgets</code></td> <td>用于创建GUI界面组件的类</td></tr> <tr><td><code>Qt Network</code></td> <td>提供实现TCP/IP网络通信的类</td></tr> <tr><td><code>Qt D-Bus</code></td> <td>D-Bus是实现进程间通信（IPC）和远程过程调用（RPC）的一种通信协议，这个模块就是提供实现D-Bus通信协议的一些类</td></tr> <tr><td><code>Qt Test</code></td> <td>提供单元测试</td></tr> <tr><td><code>Qt QML</code></td> <td>提供QML编程的框架，定义了QML和基础引擎</td></tr> <tr><td><code>Qt Quick</code></td> <td>用于开发QML应用程序的标准库</td></tr> <tr><td><code>Qt Quick Controls</code></td> <td>提供基于Qt Quick的控件，用于创建复杂的UI</td></tr> <tr><td><code>Qt Quick Dialogs</code></td> <td>提供通过QML使用系统对话框的功能</td></tr> <tr><td><code>Qt Quick Layouts</code></td> <td>提供用于管理界面布局的QML类型</td></tr> <tr><td><code>Qt Quick Test</code></td> <td>提供QML应用程序的单元测试</td></tr></tbody></table> <p>Qt Core模块是Qt框架的核心，其他模块都依赖此模块，在创建GUI项目时，qmake将自动添加下面的语句</p> <div class="language-python extra-class"><pre class="language-python"><code>QT <span class="token operator">+=</span> core gui
</code></pre></div><h3 id="附加模块"><a href="#附加模块" class="header-anchor">#</a> 附加模块</h3> <table><thead><tr><th>模块</th> <th>功能</th></tr></thead> <tbody><tr><td><code>Active Qt</code></td> <td>用于开发使用 ActiveX和 COM控件的 Windows应用程序</td></tr> <tr><td><code>Qt 3D</code></td> <td>支持二维和三维图形渲染，用于开发近实时的仿真系统</td></tr> <tr><td><code>Qt 5 Core Compatibility</code></td> <td>提供一些 Qt 5中有而 Qt 6中没有的 API，这是为了兼容 Qt 5</td></tr> <tr><td><code>Qt Bluetooth</code></td> <td>提供访问蓝牙硬件的功能</td></tr> <tr><td><code>Qt Charts</code></td> <td>提供用于数据显示的一些二维图表组件</td></tr> <tr><td><code>Qt Concurrent</code></td> <td>提供一些类，使我们无须使用底层的线程控制就可以编写多线程应用程序</td></tr> <tr><td><code>Qt Data Visualization</code></td> <td>提供用于三维数据可视化显示的一些类</td></tr> <tr><td><code>Qt Help</code></td> <td>提供一些在应用程序中集成帮助文档的类</td></tr> <tr><td><code>Qt Image Formats</code></td> <td>支持附加图片格式的插件，格式包括 TIFF、MNG和 TGA等</td></tr> <tr><td><code>Qt Multimedia</code></td> <td>提供处理多媒体内容的一些类，处理方式包括播放音频和视频，通过麦克风和摄像头录制音频和视频</td></tr> <tr><td><code>Qt Network Authorization</code></td> <td>使 Qt应用程序能访问在线账号或 HTTP服务，而又不暴露用户密码</td></tr> <tr><td><code>Qt NFC</code></td> <td>提供访问近场通信（near field communication，NFC）硬件的功能</td></tr> <tr><td><code>Qt OpenGL</code></td> <td>提供一些便于在应用程序中使用 OpenGL的类</td></tr> <tr><td><code>Qt Positioning</code></td> <td>通过 GPS或 WiFi定位，为应用程序提供定位信息</td></tr> <tr><td><code>Qt Print Support</code></td> <td>提供一些用于打印控制的类</td></tr> <tr><td><code>Qt Remote Objects</code></td> <td>提供一种进程间通信技术，可以在进程间或计算机之间方便地交换信息</td></tr> <tr><td><code>Qt SCXML</code></td> <td>用于通过 SCXML（有限状态机规范）文件创建状态机</td></tr> <tr><td><code>Qt Sensors</code></td> <td>提供访问传感器硬件的功能，传感器包括加速度计、陀螺仪等</td></tr> <tr><td><code>Qt Serial Bus</code></td> <td>提供访问串行工业总线（如 CAN和 Modbus总线）的功能</td></tr> <tr><td><code>Qt Serial Port</code></td> <td>提供访问兼容 RS232引脚的串行接口的功能</td></tr> <tr><td><code>Qt Shader Tools</code></td> <td>提供用于三维图形着色的工具</td></tr> <tr><td><code>Qt SQL</code></td> <td>提供一些使用 SQL操作数据库的类</td></tr> <tr><td><code>Qt SVG</code></td> <td>提供显示 SVG图片文件的类</td></tr> <tr><td><code>Qt UI Tools</code></td> <td>提供一些类，可以在程序运行时加载用 Qt Designer设计的 UI文件以动态创建 UI</td></tr> <tr><td><code>Qt Virtual Keyboard</code></td> <td>实现不同输入法的虚拟键盘</td></tr> <tr><td><code>Qt Wayland Compositor</code></td> <td>实现了 Wayland协议，能创建用户定制的显示服务</td></tr> <tr><td><code>Qt WebChannel</code></td> <td>用于实现服务器端（QML或 C++应用程序）与客户端（HTML/ JavaScript或 QML应用程序）进行 P2P通信</td></tr> <tr><td><code>Qt WebEngine</code></td> <td>提供一些类和函数，通过 Chromium浏览器项目实现在应用程序中嵌入显示动态网页</td></tr> <tr><td><code>Qt WebSockets</code></td> <td>提供 WebSocket 通信功能。WebSocket 是一种 Web 通信协议，可实现客户端程序与远程主机的双向通信</td></tr></tbody></table> <h2 id="全局定义"><a href="#全局定义" class="header-anchor">#</a> 全局定义</h2> <p>头文件<code>&lt;QtGlobal&gt;</code>包含Qt框架中的一些全局定义，包括基本数据类型、函数和宏，一般Qt类的头文件都会包含这个头文件，所以无需我们手动包含</p> <h3 id="基本数据类型"><a href="#基本数据类型" class="header-anchor">#</a> 基本数据类型</h3> <p>为了确保在各个平台下的基本数据类型都有统一长度，Qt为各种常见的数据类型定义了类型符号</p> <table><thead><tr><th>基本数据类型</th> <th>POSIX标准等效定义</th> <th>字节数</th></tr></thead> <tbody><tr><td><code>qint8</code></td> <td><code>signed char</code></td> <td>1</td></tr> <tr><td><code>qint16</code></td> <td><code>signed short</code></td> <td>2</td></tr> <tr><td><code>qint32</code></td> <td><code>signed int</code></td> <td>4</td></tr> <tr><td><code>qint64</code></td> <td><code>long long int</code></td> <td>8</td></tr> <tr><td><code>qlonglong</code></td> <td><code>long long int</code></td> <td>8</td></tr> <tr><td><code>quint8</code></td> <td><code>unsigned char</code></td> <td>1</td></tr> <tr><td><code>quint16</code></td> <td><code>unsigned short</code></td> <td>2</td></tr> <tr><td><code>quint32</code></td> <td><code>unsigned int</code></td> <td>4</td></tr> <tr><td><code>quint64</code></td> <td><code>unsigned long long int</code></td> <td>8</td></tr> <tr><td><code>qulonglong</code></td> <td><code>unsigned long long int</code></td> <td>8</td></tr> <tr><td><code>uchar</code></td> <td><code>unsigned char</code></td> <td>1</td></tr> <tr><td><code>ushort</code></td> <td><code>unsigned char</code></td> <td>2</td></tr> <tr><td><code>uint</code></td> <td><code>unsigned int</code></td> <td>4</td></tr> <tr><td><code>ulong</code></td> <td><code>unsigned long</code></td> <td>8</td></tr> <tr><td><code>qreal</code></td> <td><code>double</code></td> <td>8</td></tr> <tr><td><code>qsizetype</code></td> <td><code>ssize_t</code></td> <td>8</td></tr> <tr><td><code>qfloat16</code></td> <td>-</td> <td>2</td></tr></tbody></table> <p><code>qreal</code>默认表示 8 字节<code>double</code>类型的浮点数，如果使用<code>-qreal float</code>选项进行配置，就表示4字节的<code>float</code>类型的浮点数</p> <p><code>qfloat16</code>是Qt5.9中增加的一种类型，用于表示16位的浮点数，但是<code>qfloat16</code>不是在<code>&lt;QtGlobal&gt;</code>中定义的，需要包含头文件<code>&lt;QFloat16&gt;</code></p> <h3 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h3> <p>下面是常见的全局函数定义，只列出了输入和输出参数，如果是<code>float</code>或<code>double</code>类型参数的函数重载，则只列出<code>double</code>类型参数的重载</p> <table><thead><tr><th>原型</th> <th>功能</th></tr></thead> <tbody><tr><td><code>T qAbs(const T &amp;value)</code></td> <td>返回变量 value的绝对值</td></tr> <tr><td><code>const T &amp;qBound(const T &amp;min, const T &amp;value, const T &amp;max)</code></td> <td>返回 value限定在 min～max的值</td></tr> <tr><td><code>T qExchange(T &amp;obj, U &amp;&amp;newValue)</code></td> <td>将 obj的值用 newValue替换，返回 obj的旧值</td></tr> <tr><td><code>int qFpClassify(double val)</code></td> <td>返回 val的分类，包括 FP_NAN（非数）、FP_INFINITE（正或负的无穷大）、FP_ZERO（零）等几种类型</td></tr> <tr><td><code>bool qFuzzyCompare(double p1, double p2)</code></td> <td>若 p1 和 p2 近似相等，返回 true</td></tr> <tr><td><code>bool qFuzzyIsNull(double d)</code></td> <td>若参数 d 约等于 0，返回 true</td></tr> <tr><td><code>double qInf()</code></td> <td>返回无穷大的数</td></tr> <tr><td><code>bool qIsFinite(double d)</code></td> <td>若 d 是一个有限的数，返回 true</td></tr> <tr><td><code>bool qIsInf(double d)</code></td> <td>若 d 是一个无穷大的数，返回 true</td></tr> <tr><td><code>bool qIsNaN(double d)</code></td> <td>若 d 为非数，返回 true</td></tr> <tr><td><code>const T &amp;qMax(const T &amp;value1, const T &amp;value2)</code></td> <td>返回 value1 和 value2中的较大值</td></tr> <tr><td><code>const T &amp;qMin(const T &amp;value1, const T &amp;value2)</code></td> <td>返回 value1 和 value2中的较小值</td></tr> <tr><td><code>qint64 qRound64(double value)</code></td> <td>将 value近似为最接近的 qint64 类型整数</td></tr> <tr><td><code>int qRound(double value)</code></td> <td>将 value近似为最接近的 int类型整数</td></tr></tbody></table> <h3 id="宏"><a href="#宏" class="header-anchor">#</a> 宏</h3> <p>下面是常见的宏</p> <p><code>QT_VERSION</code>：这个宏展开为数值形式 0xMMNNPP。例如 Qt 版本为 Qt 6.2.3，则 QT_VERSION 为 0x060203</p> <p><code>Q_BYTE_ORDER</code>：表示系统内存中数据的字节序。Q_BIG_ENDIAN 表示大端字节序，Q_LITTLE_ENDIAN 表示小端字节序。在需要判断系统字节序时可以用到这几个宏，例如</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">Q_BYTE_ORDER <span class="token operator">==</span> Q_LITTLE_ENDIAN</span></span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
</code></pre></div><p><code>Q_DECL_IMPORT</code>和<code>Q_DECL_EXPORT</code>：分别用于在使用或设计共享库时导入或导出库的内容</p> <p><code>Q_UNUSED(name)</code>：声明函数中未被使用的参数，减少警告</p> <p><code>foreach(variable, container)</code>：遍历容器</p> <p><code>qDebug(const char *message, ...)</code>：在 debugger 窗口显示信息</p> <h2 id="元对象系统"><a href="#元对象系统" class="header-anchor">#</a> 元对象系统</h2> <p>Qt 中引入了元对象系统对标准 C++语言进行扩展，增加了信号与槽、属性系统、动态翻译等特性</p> <p>使用Qt 的元对象系统功能需要满足两个条件</p> <ul><li><code>QObject</code>必须是直接基类或者间接基类</li> <li>必须在类的开头插入一个宏<code>Q_OBJECT</code></li></ul> <p>构建项目时，<code>MOC</code>会读取头文件，如果发现了<code>Q_OBJECT</code>则会生成另一个包含元对象支持代码的源文件，最终这个源文件会一起加入编译</p> <h3 id="qobject"><a href="#qobject" class="header-anchor">#</a> QObject</h3> <p>下面是<code>QObject</code>与元对象系统特性相关的一些函数</p> <table><thead><tr><th>特性</th> <th>函数</th> <th>功能</th></tr></thead> <tbody><tr><td>元对象</td> <td><code>QMetaObject *metaObject()</code><br><code>QMetaObject staticMetaObject</code></td> <td>返回这个对象的元对象<br>这是类的静态变量，不是函数，存储了类的元对象</td></tr> <tr><td>类型信息</td> <td><code>bool inherits()</code></td> <td>判断这个对象是不是某个类的子类的实例</td></tr> <tr><td>动态翻译</td> <td><code>QString tr()</code></td> <td>类的静态函数，返回一个字符串的翻译版本</td></tr> <tr><td>对象树</td> <td>``QObjectList &amp;children()<code>&lt;br /&gt;</code>QObject *parent()<code>&lt;br /&gt;</code>void setParent()<code>&lt;br /&gt;</code>T findChild()<code>&lt;br /&gt;</code>QList<T> findChildren()`</T></td> <td>返回子对象列表<br>返回父对象指针<br>设置父对象<br>按照对象名称，查找可被转换为类型 T的子对象<br>返回符合名称和类型条件的子对象列表</td></tr> <tr><td>信号与槽</td> <td><code>QMetaObject::Connection connect()</code><br><code>bool disconnect()</code><br><code>bool blockSignals()</code><br><code>bool signalsBlocked()</code></td> <td>设置信号与槽关联<br>解除信号与槽的关联<br>设置是否阻止对象发射任何信号<br>若返回值为 true，表示对象被阻止发射信号</td></tr> <tr><td>属性系统</td> <td><code>QList&lt;QByteArray&gt; dynamicPropertyNames()</code><br><code>bool setProperty()</code><br><code>QVariant property()</code></td> <td>返回所有动态属性名称<br>bool setProperty()<br>返回属性值</td></tr></tbody></table> <p>每个<code>QOjbect</code>及其子类的实例都有一个元对象（meta object），获取一个对象的元对象有两种方式</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>QPushButton<span class="token operator">*</span> btn <span class="token operator">=</span> <span class="token keyword">new</span> QPushButton<span class="token punctuation">;</span>
<span class="token keyword">const</span> QMetaObject<span class="token operator">*</span> meta_ptr <span class="token operator">=</span> btn<span class="token operator">-&gt;</span><span class="token function">meatObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> QMetaObject meat_obj <span class="token operator">=</span> btn<span class="token operator">-&gt;</span>staticMetaObject<span class="token punctuation">;</span>
</code></pre></div><p><code>inherits</code>函数可以用来判断对象是否从某个类继承</p> <p><code>tr</code>函数用于返回一个字符串的翻译版本，在设计多语言界面的时候用到</p> <p>对象树（object tree），指的是对象间的从属关系。使用<code>parent</code>函数可以返回它的父对象，使用<code>children</code>函数可以返回它的子对象，使用<code>findChildren</code>可以返回它的某些子对象或所有子对象。<strong>在对象树中，当父对象被删除了，那么它的子对象也将自动被删除</strong></p> <p>信号槽机制，通过在类的开头插入一个宏<code>Q_OBJECT</code>，我们就可以使用Qt扩展的C++特性，例如定义属性、类信息、信号和槽函数</p> <p>属性系统，通过宏<code>Q_PROPERTY</code>定义属性，并且可以使用<code>setProperty</code>设置属性的值或定义动态属性，使用<code>property</code>函数会返回属性的值</p> <h3 id="qmetaobject"><a href="#qmetaobject" class="header-anchor">#</a> QMetaObject</h3> <p>每个<code>QObject</code>及其子类的对象都会自动创建一个元对象，元对象存储了对象所属类的各种元数据，例如类信息元数据、方法元数据、属性元数据等等，即元对象就是对类的描述对象</p> <p>下面是<code>QMetaObject</code>常见的函数</p> <table><thead><tr><th>分组</th> <th>函数原型</th> <th>功能</th></tr></thead> <tbody><tr><td>类的信息</td> <td><code>char *className()</code><br><code>QMetaType metaType()</code><br><code>QMetaObject *superClass()</code><br><code>bool inherits(QMetaObject *metaObject)</code><br><code>QObject *newInstance(...)</code></td> <td>返回这个类的类名称<br>返回这个元对象的元类型<br>返回这个类的上层父类的元对象<br>返回 true表示这个类继承自 metaObject 描述的类否则返回false<br>创建这个类的一个实例，可以给构造函数传递最多10个参数</td></tr> <tr><td>类信息元数据</td> <td><code>QMetaClassInfo classInfo(int index)</code><br><code>int indexOfClassInfo(char *name)</code><br><code>int classInfoCount()</code><br><code>int classInfoOffset()</code></td> <td>返回序号为 index 的一条类信息的元数据，类信息是在类中用宏 Q_CLASSINFO定义的一条信息<br>返回名称为name的类信息的序号，序号可用于classInfo()函数<br>返回这个类的类信息条数<br>返回这个类的第一条类信息的序号</td></tr> <tr><td>构造函数元数据</td> <td><code>int constructorCount()</code><br><code>QMetaMethod constructor(int index)</code></td> <td>返回这个类的构造函数的个数<br>返回这个类的序号为 index的构造函数的元数据</td></tr> <tr><td>方法元数据</td> <td><code>int indexOfConstructor(char *constructor)</code><br><code>QMetaMethod method(int index)</code><br><code>int methodCount()</code><br><code>int methodOffset()</code><br><code>int indexOfMethod(char *method)</code></td> <td>返回一个构造函数的序号，constructor包括正则化之后的函数名和参数名<br>返回序号为 index 的方法的元数据<br>返回这个类的方法的个数，包括基类中定义的方法，方法包括一般的成员函数，还包括信号和槽<br>返回这个类的第一个方法的序号<br>返回名称为 method 的方法的序号</td></tr> <tr><td>枚举类型元数据</td> <td><code>QMetaEnum enumerator(int index)</code><br><code>int enumeratorCount()</code><br><code>int enumeratorOffset()</code><br><code>int indexOfEnumerator(char *name)</code></td> <td>返回序号为 index 的枚举类型的元数据<br>返回这个类的枚举类型个数<br>返回这个类的第一个枚举类型的序号<br>返回名称为 name的枚举类型的序号</td></tr> <tr><td>属性元数据</td> <td><code>QMetaProperty property(int index)</code><br><code>int propertyCount()</code><br><code>int propertyOffset()</code><br><code>int indexOfProperty(char *name)</code></td> <td>返回序号为 index 的属性的元数据<br>返回这个类的属性的个数<br>返回这个类的第一个属性的序号<br>返回名称为 name的属性的序号</td></tr> <tr><td>信号与槽</td> <td><code>int indexOfSignal(char *signal)</code><br><code>int indexOfSlot(char *slot)</code></td> <td>返回名称为 signal的信号的序号<br>返回名称为 slot的槽函数的序号</td></tr> <tr><td>静态函数</td> <td><code>bool checkConnectArgs(...)</code><br><code>void connectSlotsByName(QObject *object)</code><br><code>bool invokeMethod(...)</code><br><code>QByteArray normalizedSignature(char *method)</code></td> <td>检查信号与槽函数的参数是否兼容<br>迭代搜索 object的所有子对象，将匹配的信号和槽连接起来<br>运行 QObject 对象的某个方法，包括信号、槽或成员函数<br>将方法 method 的名称和参数字符串正则化，去除多余空格。函数返回的结果可用于 checkConnectArgs()、indexOfConstructor()等函数</td></tr></tbody></table> <p>通过使用<code>QObject</code>和<code>QMetaObject</code>提供的一些的函数，可以在运行时获取类型信息，我们并不需要通过c++编译器提供的<code>RTTI</code>支持</p> <p>获得类名称：</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>QPushButton<span class="token operator">*</span> btn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> QMetaObject<span class="token operator">*</span> meta <span class="token operator">=</span> btn<span class="token operator">-&gt;</span><span class="token function">meatObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
QString str <span class="token operator">=</span> <span class="token function">QString</span><span class="token punctuation">(</span>meta<span class="token operator">-&gt;</span><span class="token function">className</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;QPushButton&quot;</span>
</code></pre></div><p>判断对象是否继承自某个类</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>QPushButton<span class="token operator">*</span> btn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">bool</span> result <span class="token operator">=</span> btn<span class="token operator">-&gt;</span><span class="token function">inherits</span><span class="token punctuation">(</span><span class="token string">&quot;QPushButton&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
result <span class="token operator">=</span> btn<span class="token operator">-&gt;</span><span class="token function">inherits</span><span class="token punctuation">(</span><span class="token string">&quot;QObject&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
result <span class="token operator">=</span> btn<span class="token operator">-&gt;</span><span class="token function">inherits</span><span class="token punctuation">(</span><span class="token string">&quot;QWidget&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
result <span class="token operator">=</span> btn<span class="token operator">-&gt;</span><span class="token function">inherits</span><span class="token punctuation">(</span><span class="token string">&quot;QCheckBox&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div><blockquote><p>注：如果一个类是多重继承的，并且其中一个类是<code>QObject</code>，那么<code>inherits(&quot;QObject&quot;)</code>同样会返回<code>true</code></p></blockquote> <p>获得父类的元对象</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>QPushButton<span class="token operator">*</span> btn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> QMetaObject<span class="token operator">*</span> meta <span class="token operator">=</span> btn<span class="token operator">-&gt;</span><span class="token function">metaObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
QString str1 <span class="token operator">=</span> <span class="token function">QString</span><span class="token punctuation">(</span>meta<span class="token operator">-&gt;</span><span class="token function">className</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// str1 = &quot;QPushButton&quot;</span>

<span class="token keyword">const</span> QMetaObject<span class="token operator">*</span> metaSuper <span class="token operator">=</span> btn<span class="token operator">-&gt;</span><span class="token function">metaObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">superClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
QString str2 <span class="token operator">=</span> <span class="token function">QString</span><span class="token punctuation">(</span>metaSuper<span class="token operator">-&gt;</span><span class="token function">className</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// str2 = &quot;QAbstractButton&quot;</span>
</code></pre></div><p>Qt版本的<code>dynamic_cast</code>函数，也是用来进行继承关系中进行动态类型转换的。但是需要类属于Qt元对象系统可管控的类</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>QObject<span class="token operator">*</span> btn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> QMetaObject<span class="token operator">*</span> meta <span class="token operator">=</span> btn<span class="token operator">-&gt;</span><span class="token function">metaObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
QString str1 <span class="token operator">=</span> <span class="token function">QString</span><span class="token punctuation">(</span>meta<span class="token operator">-&gt;</span><span class="token function">className</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// str1 = &quot;QPushButton&quot;</span>

QPushButton<span class="token operator">*</span> btn_push <span class="token operator">=</span> <span class="token generic-function"><span class="token function">qobject_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>QPushButton<span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>btn<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ok</span>
<span class="token keyword">const</span> QMetaObject<span class="token operator">*</span> meta2 <span class="token operator">=</span> btn_push<span class="token operator">-&gt;</span><span class="token function">metaObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
QString str2 <span class="token operator">=</span> <span class="token function">QString</span><span class="token punctuation">(</span>meta2<span class="token operator">-&gt;</span><span class="token function">className</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// str2 = &quot;QPushButton&quot;</span>

QCheckBox<span class="token operator">*</span> chkBox <span class="token operator">=</span> <span class="token generic-function"><span class="token function">qobject_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>QCheckBox<span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>btn<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 转换失败，并且chkBox是nullptr</span>
</code></pre></div><h3 id="属性系统"><a href="#属性系统" class="header-anchor">#</a> 属性系统</h3> <p>使用宏<code>Q_PROPERTY</code>定义属性，格式如下</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token function">Q_PROPERTY</span><span class="token punctuation">(</span>type <span class="token function">name</span>
<span class="token punctuation">(</span>READ getFunction <span class="token punctuation">[</span>WRITE setFunction<span class="token punctuation">]</span> <span class="token operator">|</span>
MEMBER memberName <span class="token punctuation">[</span><span class="token punctuation">(</span>READ getFunction <span class="token operator">|</span> WRITE setFunction<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span>RESET resetFunction<span class="token punctuation">]</span>
<span class="token punctuation">[</span>NOTIFY notifySignal<span class="token punctuation">]</span>
<span class="token punctuation">[</span>REVISION <span class="token keyword">int</span> <span class="token operator">|</span> <span class="token function">REVISION</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span>DESIGNABLE <span class="token keyword">bool</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span>SCRIPTABLE <span class="token keyword">bool</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span>STORED <span class="token keyword">bool</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span>USER <span class="token keyword">bool</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span>BINDABLE bindableProperty<span class="token punctuation">]</span>
<span class="token punctuation">[</span>CONSTANT<span class="token punctuation">]</span>
<span class="token punctuation">[</span>FINAL<span class="token punctuation">]</span>
<span class="token punctuation">[</span>REQUIRED<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>type</code>：属性值的类型，可以是<code>QVariant</code>支持的任何类型</li> <li><code>name</code>：属性的名称</li> <li><code>READ</code>：指定一个读取属性值的函数，当没有<code>MEMBER</code>时必须设置</li> <li><code>WRITE</code>：指定一个设置属性值的函数，如果是只读属性则没有<code>WRITE</code>配置</li> <li><code>MEMBER</code>：指定一个成员变量与属性关联，并让属性成为可读可写属性，指定后不再设置<code>READ</code>和<code>WRITE</code></li> <li><code>RESET</code>：可选的，指定一个用于设置属性默认值的函数</li> <li><code>NOTIFY</code>：可选的，用于设置一个信号，当属性值发生改成时发射</li> <li><code>DESIGNABLE</code>：表示属性是否在Qt Designer的属性编辑器中可见，默认为<code>true</code></li> <li><code>USER</code>：表示这个属性是否为用户可编辑的，默认值为<code>false</code>。通常一个类只有一个<code>USER</code>设置为<code>true</code>的属性，例如<code>QAbstractButton</code>的<code>checked</code>属性</li> <li><code>CONSTANT</code>：表示属性为一个只读属性。具有<code>CONSTANT</code>的属性不能有<code>WRITE</code>和<code>NOTYFY</code></li> <li><code>FINAL</code>：表示所定义的属性不能被子类重写</li></ul> <p>下面是定义属性的一些例子：</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token function">Q_PROPERTY</span><span class="token punctuation">(</span><span class="token keyword">bool</span> focus READ hasFocus<span class="token punctuation">)</span>
<span class="token function">Q_PROPERTY</span><span class="token punctuation">(</span><span class="token keyword">bool</span> enabled READ isEnabled WRITE setEnabled<span class="token punctuation">)</span>
<span class="token function">Q_PROPERTY</span><span class="token punctuation">(</span>QCursor cursor READ cursor WRITE setCursor RESET unsetCursor<span class="token punctuation">)</span>
</code></pre></div><p>对于可读可写的属性，读取属性值的函数通常就是属性名，设置属性值的函数就是<code>set</code>前缀与属性名的驼峰命名，例如：</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>QString <span class="token class-name">QLabel</span><span class="token double-colon punctuation">::</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 读取text属性的函数</span>
<span class="token keyword">void</span> <span class="token class-name">QLabel</span><span class="token double-colon punctuation">::</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString<span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token comment">// 设置text属性的函数</span>
</code></pre></div><p>可以使用<code>QObject</code>继承来的<code>property</code>函数或<code>setProperty</code>函数来读取或设置属性值，例如：</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">bool</span> isFlat <span class="token operator">=</span> ui<span class="token operator">-&gt;</span>btnProperty<span class="token operator">-&gt;</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">&quot;flat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ui<span class="token operator">-&gt;</span>btnProperty<span class="token operator">-&gt;</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;flat&quot;</span><span class="token punctuation">,</span> <span class="token operator">!</span>isFlat<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>注：<code>QObject::property</code>函数的返回值类型是<code>QVariant</code>类型，需要转成具体的类型</p></blockquote> <p>可以使用<code>QMetaObject</code>提供的一些函数获取属性元数据对象，例如：</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">const</span> QMetaObject<span class="token operator">*</span> meta <span class="token operator">=</span> ui<span class="token operator">-&gt;</span>spinBoy<span class="token operator">-&gt;</span><span class="token function">metaObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> index <span class="token operator">=</span> meta<span class="token operator">-&gt;</span><span class="token function">indexOfProperty</span><span class="token punctuation">(</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
QMetaProperty prop <span class="token operator">=</span> meta<span class="token operator">-&gt;</span><span class="token function">property</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取属性的元数据</span>
<span class="token keyword">bool</span> res <span class="token operator">=</span> prop<span class="token punctuation">.</span><span class="token function">isWritable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 该属性是否可写</span>
res <span class="token operator">=</span> prop<span class="token punctuation">.</span><span class="token function">isDesignable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 该属性是否可在Qt Designer中显示</span>
res <span class="token operator">=</span> prop<span class="token punctuation">.</span><span class="token function">hasNotifySignal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 该属性改变时是否发生信号</span>
</code></pre></div><p>当使用<code>QObject::setProperty</code>设置属性值时，如果属性名称原本不存在，那么就为<strong>这个对象</strong>定义一个动态属性。因为动态属性是针对对象实例所定义的，所以只能使用<code>QObject::property</code>函数进行读取，例如：</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>editName<span class="token operator">-&gt;</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;required&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
comboSex<span class="token operator">-&gt;</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;required&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
checkAgree<span class="token operator">-&gt;</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;required&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如上所示，然后我们就可以通过<code>qss</code>将属性值为<code>true</code>的背景色设置为亮绿色</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">*[required=&quot;true&quot;]</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> lime
<span class="token punctuation">}</span>
</code></pre></div><h3 id="类信息"><a href="#类信息" class="header-anchor">#</a> 类信息</h3> <p>使用宏<code>Q_CLASSINFO</code>定义一些附加的类信息，例如</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">QMyClass</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QObject</span></span>
<span class="token punctuation">{</span>
    Q_OBJECT
    <span class="token function">Q_CLASSINFO</span><span class="token punctuation">(</span><span class="token string">&quot;author&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Wang&quot;</span><span class="token punctuation">)</span>
    <span class="token function">Q_CLASSINFO</span><span class="token punctuation">(</span><span class="token string">&quot;company&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;UPC&quot;</span><span class="token punctuation">)</span>
    <span class="token function">Q_CLASSINFO</span><span class="token punctuation">(</span><span class="token string">&quot;version&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3.0.1&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>注：类信息有名称和值，只能用字符串表示</p></blockquote> <p>可以使用<code>QMetaObject</code>提供的一些函数获取类信息元数据对象，例如</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">const</span> QMetaObject<span class="token operator">*</span> meta <span class="token operator">=</span> ui<span class="token operator">-&gt;</span>spinBoy<span class="token operator">-&gt;</span><span class="token function">metaObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> index <span class="token operator">=</span> meta<span class="token operator">-&gt;</span><span class="token function">indexOfClassInfo</span><span class="token punctuation">(</span><span class="token string">&quot;author&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
QMetaClassInfo class_info <span class="token operator">=</span> meta<span class="token operator">-&gt;</span><span class="token function">classInfo</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
QString str1 <span class="token operator">=</span> <span class="token function">QString</span><span class="token punctuation">(</span>class_info<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// str1 = &quot;author&quot;</span>
QString str2 <span class="token operator">=</span> <span class="token function">QString</span><span class="token punctuation">(</span>class_info<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// str2 = &quot;Wang&quot;</span>
</code></pre></div><h3 id="信号与槽"><a href="#信号与槽" class="header-anchor">#</a> 信号与槽</h3></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/my-blog/cpp/c++类型转换.html" class="prev">
          c++类型转换
        </a></span> <!----></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/my-blog/qt/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/03-Qt%E6%A1%86%E6%9E%B6%E5%8A%9F%E8%83%BD.html#模块" class="sidebar-link reco-side-模块" data-v-b57cc07c>模块</a></li><li class="level-3" data-v-b57cc07c><a href="/my-blog/qt/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/03-Qt%E6%A1%86%E6%9E%B6%E5%8A%9F%E8%83%BD.html#基础模块" class="sidebar-link reco-side-基础模块" data-v-b57cc07c>基础模块</a></li><li class="level-3" data-v-b57cc07c><a href="/my-blog/qt/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/03-Qt%E6%A1%86%E6%9E%B6%E5%8A%9F%E8%83%BD.html#附加模块" class="sidebar-link reco-side-附加模块" data-v-b57cc07c>附加模块</a></li><li class="level-2" data-v-b57cc07c><a href="/my-blog/qt/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/03-Qt%E6%A1%86%E6%9E%B6%E5%8A%9F%E8%83%BD.html#全局定义" class="sidebar-link reco-side-全局定义" data-v-b57cc07c>全局定义</a></li><li class="level-3" data-v-b57cc07c><a href="/my-blog/qt/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/03-Qt%E6%A1%86%E6%9E%B6%E5%8A%9F%E8%83%BD.html#基本数据类型" class="sidebar-link reco-side-基本数据类型" data-v-b57cc07c>基本数据类型</a></li><li class="level-3" data-v-b57cc07c><a href="/my-blog/qt/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/03-Qt%E6%A1%86%E6%9E%B6%E5%8A%9F%E8%83%BD.html#函数" class="sidebar-link reco-side-函数" data-v-b57cc07c>函数</a></li><li class="level-3" data-v-b57cc07c><a href="/my-blog/qt/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/03-Qt%E6%A1%86%E6%9E%B6%E5%8A%9F%E8%83%BD.html#宏" class="sidebar-link reco-side-宏" data-v-b57cc07c>宏</a></li><li class="level-2" data-v-b57cc07c><a href="/my-blog/qt/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/03-Qt%E6%A1%86%E6%9E%B6%E5%8A%9F%E8%83%BD.html#元对象系统" class="sidebar-link reco-side-元对象系统" data-v-b57cc07c>元对象系统</a></li><li class="level-3" data-v-b57cc07c><a href="/my-blog/qt/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/03-Qt%E6%A1%86%E6%9E%B6%E5%8A%9F%E8%83%BD.html#qobject" class="sidebar-link reco-side-qobject" data-v-b57cc07c>QObject</a></li><li class="level-3" data-v-b57cc07c><a href="/my-blog/qt/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/03-Qt%E6%A1%86%E6%9E%B6%E5%8A%9F%E8%83%BD.html#qmetaobject" class="sidebar-link reco-side-qmetaobject" data-v-b57cc07c>QMetaObject</a></li><li class="level-3" data-v-b57cc07c><a href="/my-blog/qt/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/03-Qt%E6%A1%86%E6%9E%B6%E5%8A%9F%E8%83%BD.html#属性系统" class="sidebar-link reco-side-属性系统" data-v-b57cc07c>属性系统</a></li><li class="level-3" data-v-b57cc07c><a href="/my-blog/qt/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/03-Qt%E6%A1%86%E6%9E%B6%E5%8A%9F%E8%83%BD.html#类信息" class="sidebar-link reco-side-类信息" data-v-b57cc07c>类信息</a></li><li class="level-3" data-v-b57cc07c><a href="/my-blog/qt/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/03-Qt%E6%A1%86%E6%9E%B6%E5%8A%9F%E8%83%BD.html#信号与槽" class="sidebar-link reco-side-信号与槽" data-v-b57cc07c>信号与槽</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/my-blog/assets/js/app.8e128a0c.js" defer></script><script src="/my-blog/assets/js/7.9bc745bc.js" defer></script><script src="/my-blog/assets/js/2.1c59524a.js" defer></script><script src="/my-blog/assets/js/1.4270a9d7.js" defer></script><script src="/my-blog/assets/js/43.50b20d44.js" defer></script>
  </body>
</html>
